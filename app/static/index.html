<!-- app/static/index.html -->
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PM Decision OS (MVP)</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">PM Decision OS</div>
      <div class="muted">Market facts + decision events • chat console</div>
    </div>
  </header>

  <main class="shell">
    <!-- Left rail: ticker / case history -->
    <aside class="rail panel">
      <div class="rail-head">
        <div class="h2">Tickers / Cases</div>
        <div class="muted small">Click to switch context</div>
      </div>

      <form id="quickSwitchForm" class="stack" autocomplete="off">
        <label class="field">
          <span>Quick switch</span>
          <input id="quickSwitchInput" type="text" placeholder="AAPL" />
        </label>
        <div class="row">
          <button type="submit" class="btn-secondary">Set ticker</button>
          <button type="button" id="refreshCasesBtn" class="btn-secondary">Refresh</button>
        </div>
        <div id="railError" class="error" style="display:none;"></div>
      </form>

      <div class="divider"></div>

      <div class="rail-subhead">
        <div class="muted small">Recent</div>
      </div>
      <ul id="caseList" class="list"></ul>
    </aside>

    <!-- Center: chat -->
    <section class="chat panel">
      <div class="chat-head">
        <div>
          <div class="h2">Console</div>
          <div class="muted small" id="contextLine">No ticker selected.</div>
        </div>
        <div class="row">
          <button id="showEventsBtn" class="btn-secondary" type="button" disabled>Events</button>
          <button id="resetDraftBtn" class="btn-secondary" type="button" disabled>Clear draft</button>
        </div>
      </div>

      <div id="chatLog" class="chatlog" aria-label="Chat transcript"></div>

      <form id="chatForm" class="chatbar" autocomplete="off">
        <input id="chatInput" type="text"
          placeholder="ticker AAPL • update: ... • risk: ... • switch to TGT from AAPL" />
        <button type="submit">Send</button>
      </form>

      <div id="chatError" class="error" style="display:none;"></div>
    </section>

    <!-- Right rail: cheatsheet + state -->
    <aside class="right panel">
      <div class="h2">Commands</div>
      <div class="cheatsheet">
        <div class="chip"><span class="k">ticker</span> <span class="v">AAPL</span></div>
        <div class="chip"><span class="k">long</span> <span class="v">AAPL</span></div>
        <div class="chip"><span class="k">short</span> <span class="v">AAPL</span></div>
        <div class="chip"><span class="k">switch</span> <span class="v">to TGT from AAPL</span></div>
        <div class="divider-mini"></div>
        <div class="chip"><span class="k">update:</span> <span class="v">THESIS_UPDATE</span></div>
        <div class="chip"><span class="k">risk:</span> <span class="v">RISK_NOTE</span></div>
        <div class="chip"><span class="k">size:</span> <span class="v">RESIZE</span></div>
        <div class="chip"><span class="k">rule:</span> <span class="v">TICKER_RULE</span></div>
        <div class="chip"><span class="k">post:</span> <span class="v">POST_MORTEM</span></div>
        <div class="divider-mini"></div>
        <div class="chip"><span class="k">events</span> <span class="v">show timeline</span></div>
        <div class="chip"><span class="k">draft</span> <span class="v">show draft state</span></div>
        <div class="chip"><span class="k">finalize</span> <span class="v">finalize draft</span></div>
      </div>

      <div class="divider"></div>

      <div class="h2">State</div>
      <div class="statebox">
        <div class="kv"><span class="muted">Ticker</span><span id="stateTicker">—</span></div>
        <div class="kv"><span class="muted">Case</span><span id="stateCase">—</span></div>
        <div class="kv"><span class="muted">Draft</span><span id="stateDraft">—</span></div>
        <div class="kv"><span class="muted">Next</span><span id="stateNext">—</span></div>
      </div>

      <div class="divider"></div>

      <div class="h2">Timeline</div>
      <div class="muted small">Last 10 FINAL events (current case)</div>
      <ul id="miniTimeline" class="mini"></ul>
    </aside>
  </main>

  <script src="/static/app.js"></script>
</body>

</html>